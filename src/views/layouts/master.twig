{# ############## المتغيرات المشتركة في جميع العروض ################
| المتغير                                           | النوع     | الوصف                                                                                              |
|----------------------------------------------------|----------|----------------------------------------------------------------------------------------------------|
| store                                              | Store    | كائن المتجر                                                                                        |
| store.id                                           | int      | معرف المتجر                                                                                        |
| store.name                                         | string   | اسم المتجر                                                                                        |
| store.username                                     | string   | اسم المستخدم للمتجر                                                                                |
| store.description                                  | string   | وصف المتجر                                                                                        |
| store.slogan                                       | ?string  | * إذا كانت ميزة في twilight.json                                                                    |
| store.logo                                         | string   | رابط شعار المتجر                                                                                  |
| store.url                                          | string   | رابط المتجر                                                                                       |
| store.api                                          | string   | رابط API للمتجر الحالي                                                                            |
| store.icon                                         | string   | رابط أيقونة المتجر                                                                                 |
| store.contacts                                     | object   | [mobile, phone, email, whatsapp, telegram]، مثال: store.contacts.email                             |
| store.social                                       | object   | [instagram, snapchat, twitter, youtube, facebook, pinterest, maroof, whatsapp]، مثال: store.social.twitter |
| store.settings                                     | object   | إعدادات المتجر                                                                                     |
| store.settings.auth.email_allowed                  | bool     | هل يسمح باستخدام البريد الإلكتروني للتسجيل؟                                                      |
| store.settings.auth.mobile_allowed                 | bool     | هل يسمح باستخدام الهاتف المحمول للتسجيل؟                                                         |
| store.settings.auth.is_email_required              | bool     | هل البريد الإلكتروني مطلوب للتسجيل؟                                                               |
| store.settings.cart.apply_coupon_enabled           | bool     | هل يسمح للزوار بتطبيق القسائم في صفحة السلة؟                                                     |
| store.settings.product.total_sold_enabled          | bool     | هل يتم تمكين عرض إجمالي المبيعات للمنتجات؟                                                      |
| store.settings.product.fit_type                    | ?string  | null عندما يكون حجم بطاقة المنتج غير مفعل�� أو ['cover', 'contain']                               |
| store.settings.category.testimonial_enabled        | bool     | عرض الشهادات العشوائية في صفحة الفئة                                                              |
| store.settings.tax.number                          | ?string  | رقم الضريبة                                                                                        |
| store.settings.tax.certificate                     | ?string  | رابط صورة الشهادة                                                                                 |
| store.settings.tax.taxable_prices_enabled          | bool     | هل الضريبة مشمولة في الأسعار، مثال: سعر المنتج 100 والضريبة 15، سيكون السعر 115                  |
| store.settings.rating_enabled                      | bool     | هل تمكين التقييمات للمتجر أو الشحن أو المنتجات؟                                                  |
| store.settings.arabic_numbers_enabled              | bool     | هل يرغب التاجر في عرض الأرقام بتنسيق عربي؟                                                       |
| store.settings.is_multilingual                     | bool     | هل المتجر متعدد اللغات؟                                                                            |
| store.settings.currencies_enabled                  | bool     | هل تمكين العملات؟                                                                                 |
| theme                                              | Theme    | كائن الثيم                                                                                        |
| theme.id                                           | int      | معرف الثيم                                                                                        |
| theme.name                                         | string   | اسم الثيم                                                                                        |
| theme.mode                                         | string   | `live`, `preview`                                                                                  |
| theme.is_rtl                                       | bool     | هل الثيم من اليمين لليسار؟                                                                        |
| theme.translations_hash                            | int      | يستخدم في حالة تحديث التاجر لترجمات واجهة المتجر                                                  |
| theme.color                                        | object   | كائن الألوان                                                                                        |
| theme.color.primary                                | string   | اللون الأساسي                                                                                      |
| theme.color.text                                   | string   | لون النص المناسب مقارنة بـ `theme.primary.color`، مثل #000000، #FFFFFF                           |
| theme.color.reverse_primary                        | string   | اللون المعاكس للون الأساسي                                                                         |
| theme.color.reverse_text                           | string   | إذا كان `theme.text_color=#000000` يعني أن `theme.reverse_text_color=#FFFFFF`                      |
| theme.color.is_dark                                | bool     | هل يعتبر اللون الرئيسي للمتجر `theme.primary.color` لونًا داكنًا؟                                 |
| theme.color.darker(float alpha, ?string hexColor)  | string   | الحصول على لون أغمق من `theme.primary.color` أو من اللون الممرر، `alpha` يتراوح من 0.0-1.0      |
| theme.color.lighter(float alpha, ?string hexColor) | string   | الحصول على ل��ن أفتح من `theme.primary.color` أو من اللون الممرر، `alpha` يتراوح من 0.0-1.0      |
| theme.font                                         | ?object  | خط محدد مسبقًا من Salla، null عندما لا يحتوي الثيم على ميزة `fonts`                              |
| theme.font.name                                    | string   | DINNextLTArabic-Regular، Amazon-Ember، Apple، Dubai، Estedad                                      |
| theme.font.url                                     | string   | رابط CSS الكامل، مثال: 'https://my_store.test/dist/fonts/default.css'                             |
| theme.settings                                     | object   | كائن ديناميكي بقيم الإعدادات في twilight.json، مثال: `theme.settings.topnav_is_dark`              |
| theme.settings.set(settingName, value)             | string   | تعيين متغير عالمي، ثم الحصول عليه {{theme.settings.get('my_var','fallback') }}                   |
| theme.settings.get(settingName, default=null)      | mixed    | الحصول على إعداد الثيم، مثال: `theme.settings.get('my_var', 'fallback')`                          |
#}
<!DOCTYPE html>
<html lang="{{ user.language.code }}" dir="{{ user.language.dir }}">
<!-- بسم الله الرحمن الرحيم -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {{ theme.settings.set('placeholder', 'images/placeholder.png') }}

    <!-- لإزالة جميع CSS و JS التي تعيق العرض والبدء مع CSS الحرج -->
    <!-- لإظهار محمل للمستخدم حتى يتم تحميل محتوى الصفحة -->
    <style>
      .loader-init {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: white;
          transition: opacity 0.75s, visibility 0.75s;
          z-index: 9999;
      }

      .loader-init--hidden {
          opacity: 0;
          visibility: hidden;
      }

      .loader-init::after {
          content: "";
          width: 36px;
          height: 36px;
          border: 3px solid #eee;
          border-top-color: #5bd5c4;
          border-radius: 50%;
          animation: loading 0.75s ease infinite;
      }

      @keyframes loading {
          from {
            transform: rotate(0turn);
          }
          to {
            transform: rotate(1turn);
          }
      }
    </style>
    <script>
      window.addEventListener("load", () => {
        const loader = document.querySelector(".loader-init");
        loader.classList.add("loader-init--hidden");
        loader.addEventListener("transitionend", () => {
		  if (!document.querySelector(".loader-init")) return;
          document.body.removeChild(loader);
          });
      });
    </script>
  
    <script defer data-cfasync="false" src="{{ 'product-card.js'|asset }}"></script>
    <script defer src="{{ 'main-menu.js'|asset }}"></script>

    {% block head_scripts %}{% endblock %}


    <script data-cfasync="false">
        window.header_is_sticky = "{{theme.settings.get('header_is_sticky', 'Default Value')}}"
        window.imageZoom = "{{theme.settings.get('imageZoom')}}"
    </script>
    
    {% hook 'head:start' %}
    {% hook head %}
    {% block styles %}{% endblock %}
    <link rel="stylesheet" href="{{ 'app.css' | asset }}">
    <link rel="stylesheet" href="{{ theme.font.path|cdn }}"/>
    <link rel="stylesheet" href="{{ 'fonts/sallaicons.css'|cdn }}"/>
    
    <style>
        :root {
            --font-main: '{{theme.font.name}}';
            --color-primary: {{ theme.color.primary }};
            --color-primary-dark: {{ theme.color.darker(0.15) }};
            --color-primary-light: {{ theme.color.lighter(0.15) }};
            --color-primary-reverse: {{ theme.color.reverse_text }};
        }
    </style>
    {# خدمات التتبع، ميزة CSS مخصصة. #}
    {% hook 'head:end' %}
</head>
<body id="app" class="overflow-x-hidden {% hook 'body:classes' %}
  {{ theme.settings.get('footer_is_dark') ? ' footer-is-dark' : ' footer-is-light' }}
  {{ theme.settings.get('topnav_is_dark') ? ' topnav-is-dark' : '' }}
  {{ theme.settings.get('sticky_add_to_cart') ? ' is-sticky-product-bar' : '' }}
  ">
  <div class="loader-init"></div>
<noscript>
    للحصول على الوظائف الكاملة لهذا الموقع، تحتاج إلى تمكين JavaScript. إليك كيفية
    <a href="https://www.enable-javascript.com/" rel="noreferrer"
       target="_blank">تمكين JavaScript على صفحة الويب</a>.
</noscript>
<div class="app-inner flex flex-col min-h-full">
    {% hook 'body:start' %}
    {% component 'header.header' %}
    {% block content %}{% endblock %}
    {% component 'footer.footer' %}
</div>
{% hook 'body:end' %}
<script defer src="{{ 'app.js' | asset }}"></script>

{# مكونات Twilight #}
<salla-offer-modal></salla-offer-modal>
<salla-search></salla-search>

{% if user.type=='guest' %}
    <salla-login-modal></salla-login-modal>
{% endif %}
{% block scripts %}{% endblock %}
</body>
</html>
